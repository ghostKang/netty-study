<html>
 <head>
  <meta http-equiv="Content-Type" content ="text/html;" charset="UTF-8">
  <title>WebSocket客户端</title>
  <script type="text/javascript">
	var socket;
	if(!window.WebSocket){
		window.WebSocket = window.MozWeScoket;
	}

	if(window.WebSocket){
		socket = new WebSocket("ws//127.0.0.1:8888/websocket");
		socket.onmessage = function(event){
			var ta = document.getElementById('responseContent');
			ta.value += event.data + "\r\n";
		}

		socket.onopen = function(event){
			var ta = document.getElementById('responseContent');
			ta.value = "您当前的浏览器支持webSocket\r\n";
		}

		socket.onclose =  function(event){
			var ta = document.getElementById('responseContent');
			ta.value = "webSocket连接已经关闭\r\n";
		}
	}else{
		alert("您的浏览器不支持webSocket");
	}

	// 发送
	function send(message){
		if(!window.WebSocket){
			return;
		}
		if(socket.readyState == WebSocket.OPEN){
			socket.send(message);
		}else{
			alert("WebSocket连接没有建立成功！！");
		}
	}
  </script>
 </head>
 <body>
	<form onSubmit = "return false;">
		<input type = "text" name = "message" value = "">
		<br/>
		<input type="button" value="发送webSocket请求消息" onClick = "send(this.form.message.value)">
		<hr color="red"/>
		<h2>客户端接收的应答消息</h2>
		<textarea id="responseContent" style="width:1024px; height=:300px">
		</textarea>
	</form>
 </body>
</html>
